---
export const prerender = false;

import Layout from "../layouts/Layout.astro";
import CartTable from "@components/CartTable";

import { getUser } from "@lib/auth";

const user = await getUser(Astro.request);
if (!user) {
  return Astro.redirect("/signin");
}

const DNI = import.meta.env.INVOICE_DNI;
const IBAN = import.meta.env.INVOICE_IBAN;

---

<Layout title="Welcome to Roots Barefoot Budget Generator">
  <main class="container mx-auto w-full">
    <div class="p-8 bg-base-100">
    <CartTable client:only="react" DNI={DNI} IBAN={IBAN} />
</div>
  </main>
</Layout>
